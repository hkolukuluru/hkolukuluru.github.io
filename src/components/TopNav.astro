---
---

<nav class="top-nav">
  <div class="top-nav-container">
    <div class="top-nav-links">
      <a href="#" data-section="home">Home</a>
      <a href="#about" data-section="about">About Me</a>
      <a href="#experience" data-section="experience">Experience</a>
      <a href="#education" data-section="education">Education</a>
      <a href="#projects" data-section="projects">Projects</a>
      <a href="#skills" data-section="skills">Skills</a>
      <a href="#leadership" data-section="leadership">Extracurricular</a>
      <a href="#contact" data-section="contact">Contact</a>
    </div>
  </div>
</nav>

<style>
  .top-nav {
    background: var(--bg);
    border-bottom: 1px solid var(--border);
    padding: 12px 0;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    z-index: 9999;
    box-shadow: 0 2px 8px rgba(0,0,0,.08);
    margin: 0;
  }

  .top-nav-container {
    max-width: var(--max);
    margin: 0 auto;
    padding: 0 18px;
  }

  .top-nav-links {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .top-nav-links a {
    border-bottom: 0;
    padding: 6px 12px;
    font-size: 0.9rem;
    transition: color 0.2s;
    color: inherit;
    text-decoration: none;
  }

  .top-nav-links a:hover {
    opacity: 0.8;
  }

  .top-nav-links a.active {
    color: #800020;
    border-bottom: 3px solid #800020;
    padding-bottom: 3px;
  }
</style>

<script>
  // Handle home link click - scroll to top
  document.addEventListener('DOMContentLoaded', function () {
    var homeLink = document.querySelector('.top-nav-links a[data-section="home"]');
    if (homeLink) {
      homeLink.addEventListener('click', function (e) {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
        // Update active state after scroll
        setTimeout(function () {
          setActiveLink();
        }, 100);
      });
    }
  });

  // Function to set active link based on scroll position
  function setActiveLink() {
    var sections = document.querySelectorAll('section[id]');
    var navLinks = document.querySelectorAll('.top-nav-links a[data-section]');

    var current = '';
    var scrollPos = window.scrollY + 150; // Offset for fixed nav

    // Handle home link (when at top of page)
    if (scrollPos < 300) {
      current = 'home';
    } else {
        // Find which section is currently in view
        sections.forEach(function (section) {
          // Use getBoundingClientRect to avoid depending on HTMLElement-only properties
          var rect = section.getBoundingClientRect();
          var sectionTop = rect.top + window.scrollY;
          var sectionHeight = rect.height;
          var sectionId = section.getAttribute('id');
          if (sectionId && scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight + 100) {
            current = sectionId;
          }
        });
    }

    // Update active state on all links
    navLinks.forEach(function (link) {
      link.classList.remove('active');
      var section = link.getAttribute('data-section');
      if (section === current) {
        link.classList.add('active');
      }
    });
  }

  // Set active link on scroll
  var scrollTimeout = 0;
  window.addEventListener('scroll', function () {
    clearTimeout(scrollTimeout);
    scrollTimeout = setTimeout(setActiveLink, 10);
  });

  // Set active link on page load
  window.addEventListener('load', setActiveLink);
  document.addEventListener('DOMContentLoaded', setActiveLink);

  // Handle hash changes (when clicking links)
  window.addEventListener('hashchange', function () {
    setTimeout(setActiveLink, 100);
  });
</script>
